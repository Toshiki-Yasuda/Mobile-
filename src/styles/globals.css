@tailwind base;
@tailwind components;
@tailwind utilities;

/* ===== Base Styles ===== */
@layer base {
  html {
    font-family: 'Rajdhani', system-ui, sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  /* ダークモード（デフォルト） */
  body {
    @apply bg-hunter-dark text-white;
    overflow-x: hidden;
  }

  /* ライトモード */
  html.light-mode body {
    @apply bg-white text-gray-900;
  }

  /* フォーカス時のアウトライン */
  :focus-visible {
    @apply outline-2 outline-offset-2 outline-hunter-gold;
  }

  /* 選択時のスタイル（ダークモード） */
  ::selection {
    @apply bg-hunter-gold/30 text-white;
  }

  /* 選択時のスタイル（ライトモード） */
  html.light-mode ::selection {
    @apply bg-hunter-gold/20 text-gray-900;
  }
}

/* ===== Component Styles ===== */
@layer components {
  /* ボタン基本スタイル */
  .btn {
    @apply px-6 py-3 rounded-lg font-bold transition-all duration-200;
    @apply focus:outline-none focus:ring-2 focus:ring-hunter-gold focus:ring-offset-2 focus:ring-offset-hunter-dark;
    @apply disabled:opacity-50 disabled:cursor-not-allowed;
    @apply uppercase tracking-wider;
    font-family: 'Rajdhani', system-ui, sans-serif;
  }

  .btn-primary {
    @apply btn bg-hunter-green text-white;
    @apply hover:bg-hunter-green-light active:bg-hunter-green-dark;
    @apply border border-hunter-green-light/50;
  }

  .btn-secondary {
    @apply btn bg-hunter-gold text-hunter-dark;
    @apply hover:bg-hunter-gold-light active:bg-hunter-gold-dark;
  }

  .btn-ghost {
    @apply btn bg-transparent text-hunter-gold border-2 border-hunter-gold/50;
    @apply hover:bg-hunter-gold/10 hover:border-hunter-gold;
  }

  /* カードスタイル */
  .card {
    @apply bg-hunter-dark-light rounded-lg p-6;
    @apply border border-hunter-gold/20;
    @apply shadow-lg;
  }

  /* タイピング表示エリア */
  .typing-area {
    @apply bg-hunter-dark rounded-lg p-8;
    @apply border-2 border-hunter-gold/30;
    box-shadow: 0 0 15px rgba(212, 175, 55, 0.5);
  }

  /* 文字表示 */
  .char-pending {
    @apply text-white/60;
  }

  .char-current {
    @apply text-hunter-gold font-bold;
    @apply animate-pulse-slow;
  }

  .char-correct {
    @apply text-success;
  }

  .char-incorrect {
    @apply text-error;
  }

  /* キーボードキー */
  .keyboard-key {
    @apply rounded;
    @apply bg-hunter-dark-light border border-hunter-gold/30;
    @apply flex items-center justify-center;
    @apply text-sm font-mono text-white/80;
    @apply transition-all duration-100;
    font-family: 'Fira Code', monospace;
  }

  /* ホームポジションキー */
  .keyboard-key.home-position {
    @apply border-hunter-gold/50;
    box-shadow: 0 0 8px rgba(212, 175, 55, 0.2);
  }

  /* 指の色分け */
  .keyboard-key.finger-pinky-left,
  .keyboard-key.finger-pinky-right {
    background: linear-gradient(135deg, rgba(236, 72, 153, 0.15) 0%, transparent 100%);
  }
  .keyboard-key.finger-ring-left,
  .keyboard-key.finger-ring-right {
    background: linear-gradient(135deg, rgba(251, 146, 60, 0.15) 0%, transparent 100%);
  }
  .keyboard-key.finger-middle-left,
  .keyboard-key.finger-middle-right {
    background: linear-gradient(135deg, rgba(74, 222, 128, 0.15) 0%, transparent 100%);
  }
  .keyboard-key.finger-index-left,
  .keyboard-key.finger-index-right {
    background: linear-gradient(135deg, rgba(96, 165, 250, 0.15) 0%, transparent 100%);
  }

  /* 凡例用の背景色 */
  .bg-finger-pinky { background-color: rgb(236, 72, 153); }
  .bg-finger-ring { background-color: rgb(251, 146, 60); }
  .bg-finger-middle { background-color: rgb(74, 222, 128); }
  .bg-finger-index { background-color: rgb(96, 165, 250); }

  /* キーサイズ（レスポンシブ） */
  .key-normal {
    @apply w-9 h-9;
    @apply lg:w-11 lg:h-11;
    @apply xl:w-12 xl:h-12;
    @apply 2xl:w-14 2xl:h-14;
  }
  
  .key-number {
    @apply w-8 h-8;
    @apply lg:w-10 lg:h-10;
    @apply xl:w-11 xl:h-11;
    @apply 2xl:w-12 2xl:h-12;
  }
  
  .key-wide {
    @apply w-14 h-9;
    @apply lg:w-16 lg:h-11;
    @apply xl:w-20 xl:h-12;
    @apply 2xl:w-24 2xl:h-14;
  }

  /* キー押下時のスタイル */
  .keyboard-key.key-pressed {
    @apply bg-hunter-gold/40 border-hunter-gold text-white;
    box-shadow: 0 0 15px rgba(212, 175, 55, 0.6);
  }

  .keyboard-key-active {
    @apply keyboard-key;
    @apply bg-hunter-gold text-hunter-dark;
    @apply scale-95;
  }

  .keyboard-key-highlight {
    @apply keyboard-key;
    @apply border-hunter-gold bg-hunter-gold/20;
  }

  /* タイトルフォント */
  .font-title {
    font-family: 'Orbitron', monospace;
  }

  .font-display {
    font-family: 'Rajdhani', system-ui, sans-serif;
  }
}

/* ===== Utility Styles ===== */
@layer utilities {
  /* テキストグラデーション */
  .text-gradient {
    @apply bg-clip-text text-transparent;
    @apply bg-gradient-to-r from-hunter-gold to-hunter-gold-light;
  }

  /* 念オーラエフェクト */
  .nen-glow {
    box-shadow: 0 0 15px rgba(212, 175, 55, 0.5);
    animation: nen-pulse 2s ease-in-out infinite;
  }

  @keyframes nen-pulse {
    0%, 100% {
      box-shadow: 0 0 10px rgba(212, 175, 55, 0.3);
    }
    50% {
      box-shadow: 0 0 25px rgba(212, 175, 55, 0.6);
    }
  }

  /* スクロールバー非表示 */
  .no-scrollbar::-webkit-scrollbar {
    display: none;
  }
  .no-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  /* フルスクリーンコンテナ */
  .screen-container {
    @apply min-h-screen w-full;
    @apply flex flex-col items-center justify-center;
    @apply p-4;
    @apply bg-hunter-dark;
  }
}

/* ===== Animation Utilities ===== */
.animate-typing-cursor {
  animation: blink 1s step-end infinite;
}

@keyframes blink {
  0%, 100% { opacity: 1; }
  50% { opacity: 0; }
}

/* コンボエフェクト */
.combo-fire {
  animation: combo-scale 0.3s ease-out;
}

@keyframes combo-scale {
  0% { transform: scale(1); }
  50% { transform: scale(1.2); }
  100% { transform: scale(1); }
}

/* ミス時の画面シェイク */
.screen-shake {
  animation: shake 0.3s ease-in-out;
}

@keyframes shake {
  0%, 100% { transform: translateX(0); }
  20%, 60% { transform: translateX(-5px); }
  40%, 80% { transform: translateX(5px); }
}

/* スキャンライン効果 */
.scanline {
  position: relative;
}
.scanline::after {
  content: '';
  position: absolute;
  inset: 0;
  background: repeating-linear-gradient(
    0deg,
    transparent,
    transparent 2px,
    rgba(0, 0, 0, 0.1) 2px,
    rgba(0, 0, 0, 0.1) 4px
  );
  pointer-events: none;
}
