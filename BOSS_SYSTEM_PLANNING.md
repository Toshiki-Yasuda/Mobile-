# ボスシステム策定書

**作成日:** 2026-01-15
**バージョン:** 1.0
**ステータス:** 企画・検討段階

---

## 📋 概要

本ドキュメントは、ハンター試験編から選挙・暗黒大陸編まで、各チャプターの最終ステージ（ステージ6）をボスバトルとして実装するための包括的なボスシステムの設計と策定を行う。

**目的:**
- プレイヤーに章ごとの達成感を提供
- 段階的な難易度上昇で挑戦性を演出
- ゲーム内での「成長」感覚を強化
- Hunter x Hunter の世界観をゲーム内で表現

---

## 🎮 ボスシステムのコンセプト

### 基本思想

```
通常ステージ ← 学習・練習
    ↓
ボスステージ ← 総合チャレンジ・表現
    ↓
チャプター完了 ← 達成感・次への動機付け
```

### プレイフロー

```
1. チャプター1-5のステージをクリア
        ↓
2. ボスステージ（ステージ6）へアクセス
        ↓
3. ボス敵との対戦
   - 敵キャラクター表示
   - 敵HP表示
   - プレイヤーHP表示
   - 特殊条件・制限
        ↓
4. ボスを倒す（またはクリア条件達成）
        ↓
5. 特別なリザルト画面
        ↓
6. ボス討伐のご褒美・記録
```

---

## 🗡️ ボス設定

### チャプター別ボス一覧

| 章 | テーマ | ボス敵 | 難易度 | 特殊条件 |
|---|--------|--------|--------|---------|
| **1** | ハンター試験編 | ハンゾー（修行者） | ⭐⭐ | 集中力テスト |
| **2** | 天空闘技場編 | ヒソカ | ⭐⭐⭐ | 10階制限 |
| **3** | 幻影旅団編 | クロロ | ⭐⭐⭐⭐ | 時間制限 |
| **4** | ヨークシン編 | ビスケ | ⭐⭐⭐ | 戦力消耗 |
| **5** | G・I編 | 老ビスケ | ⭐⭐⭐⭐ | 連続挑戦 |
| **6** | キメラアント編 | メルエム | ⭐⭐⭐⭐⭐ | マルチフェーズ |
| **7** | 選挙・暗黒大陸編 | ネテロ会長 | ⭐⭐⭐⭐ | 究極の試練 |

---

## 🎯 ボス機制

### 1. ボス難易度修正（Boss Multipliers）

**基本難易度 + ボス修正**

```
通常ステージ: 60単語 × 難易度1-3
        ↓
ボスステージ: 60単語 × 難易度1-3 + ボス修正
```

#### ボス修正の種類

```typescript
interface BossMultiplier {
  wordDifficulty: number;      // 単語難易度の追加補正（1.0-2.0倍）
  timeLimit: number | null;    // 時間制限（秒）
  maxMisses: number | null;    // 最大ミス数
  hpMultiplier: number;        // HP倍率
  damageScaling: number;       // ダメージ計算スケーリング
  recoveryReduction: number;   // 回復量削減率（0-100%）
  comboReward: number;         // コンボボーナス
}
```

#### 章別ボス修正値

| 章 | 難易度倍率 | 時間制限 | 最大ミス | HP倍率 | ダメージスケーリング |
|----|---------|--------|--------|--------|-------------|
| 1 | 1.0x | - | 5 | 1.0x | 1.0x |
| 2 | 1.2x | 120秒 | 3 | 1.2x | 1.1x |
| 3 | 1.5x | 90秒 | 2 | 1.5x | 1.3x |
| 4 | 1.3x | 60秒 | 5 | 1.3x | 1.2x |
| 5 | 1.8x | 120秒 | 3 | 2.0x | 1.4x |
| 6 | 2.0x | マルチ | 1 | 2.5x | 1.5x |
| 7 | 1.6x | - | 2 | 1.8x | 1.3x |

### 2. ボスHP システム

**プレイヤーHP:** 100 (現在のシステム)

**ボスHP計算:**

```
ボスHP = ベースHP × チャプター数 × HP倍率
ベースHP = 150
```

#### 章別ボスHP

| 章 | ベースHP | 倍率 | 実ボスHP | 説明 |
|----|---------|------|---------|------|
| 1 | 150 | 1.0x | 150 | 初心者向け |
| 2 | 150 | 1.2x | 360 | 中程度 |
| 3 | 150 | 1.5x | 675 | 困難 |
| 4 | 150 | 1.3x | 585 | 戦闘型 |
| 5 | 150 | 2.0x | 1500 | 非常に困難 |
| 6 | 150 | 2.5x | 2250 | 最高難度 |
| 7 | 150 | 1.8x | 1890 | 究極の試練 |

### 3. ダメージ計算

**プレイヤーへのダメージ:**
```
ダメージ = 基本ダメージ × ボスダメージスケーリング
基本ダメージ = 10 (ミス時)
```

**ボスへのダメージ:**
```
ボスへのダメージ = 基本ダメージ + (難易度補正) + (コンボボーナス)
基本ダメージ = 10 (正解時)
難易度補正 = 正解した単語の難易度 × 5
コンボボーナス = (コンボ数 / 5) × 3
```

例:
- 難易度1の単語を正解: 10 + 5 = 15ダメージ
- 難易度2の単語を正解: 10 + 10 = 20ダメージ
- 難易度3の単語を正解: 10 + 15 = 25ダメージ
- コンボ10達成時: + 6ダメージ追加

---

## 🏆 ボス特殊機制

### 特殊条件（Special Conditions）

#### Chapter 1: ハンゼ - 集中力テスト
**特殊機制:** 「集中」システム
- 5連続正解でボーナス（次のミス無効）
- コンボ破壊で「気合再入」が必要
- ボスの攻撃予告表示

#### Chapter 2: ヒソカ - 10階制限
**特殊機制:** 「フロア制限」
- 時間経過で敵が強化
- 30秒ごとにボス攻撃力+10%
- 見えない敵との戦い（集中力が必須）

#### Chapter 3: クロロ - 時間制限
**特殊機制:** 「刻限」
- 90秒以内にクリア必須
- 時間が減るにつれてボスがアグレッシブに
- 最後の10秒は高速攻撃パターン

#### Chapter 4: ビスケ - 戦力消耗
**特殊機制:** 「スタミナ」
- ミスするとスタミナ減少
- スタミナ0 = 自動敗北
- コンボでスタミナ回復

#### Chapter 5: 老ビスケ - 連続挑戦
**特殊機制:** 「複数フェーズ」
- ボスが3つの形態に変化
- 各形態でHP50%減でフェーズ移行
- 形態ごとに攻撃パターン変更

#### Chapter 6: メルエム - マルチフェーズ
**特殊機制:** 「王の試練」
- 4つのフェーズで分かれた長期戦
- 各フェーズで条件変更
- クリティカル判定を避ける必要あり

#### Chapter 7: ネテロ会長 - 究極の試練
**特殊機制:** 「縛りと誓い」
- 複数の制限条件が同時作用
- ボスとプレイヤー両方がペナルティ対象
- 相互作用のある戦闘

---

## 💎 ボス報酬システム

### 戦利品（Loot）

#### 勝利報酬

| 報酬タイプ | 内容 | 条件 |
|-----------|------|------|
| **基本報酬** | 経験値 + メダル | ボスクリア時 |
| **ノーダメージボーナス** | 金メダル + 特別表示 | ボスに一度もダメージを受けない |
| **パーフェクトボーナス** | ダイヤモンドメダル + 記録登録 | ノーミス + ボスクリア |
| **時間制限ボーナス | スピードメダル + 光演出 | 時間制限内で条件クリア |
| **コンボボーナス** | コンボメダル | 100コンボ以上達成 |

#### 特殊アイテム

```
チャプタークリア報酬:
├─ ボスメダル（各章ごと）
├─ ボス討伐証明書
├─ スペシャルステッカー
└─ 次章へのアクセス権

全ボス討伐報酬:
├─ マスターバッジ
├─ 隠し要素アンロック
├─ スペシャルステージアクセス
└─ 称号「ボスハンター」
```

### ランク評価システム

**ボス戦のみの特殊評価:**

```
S+: 2分以内に無傷クリア
S:  ノーミス + 時間内クリア
A+: 1度のダメージ + 条件クリア
A:  2-3回ダメージ + クリア
B+: 健闘したが敗北に近かった
B:  標準的なクリア
C:  かろうじてクリア
D:  敗北（リトライ推奨）
```

---

## 📊 ボスバトル画面UI

### 画面レイアウト

```
┌────────────────────────────────────────────┐
│              ボス戦闘画面                    │
├────────────────────────────────────────────┤
│                                            │
│  [敵キャラ]              [敵HP]            │
│   ↓                      ████░░ 320/500   │
│  ┌──────────┐            特殊状態: 強化中  │
│  │  ボス敵  │                             │
│  │キャラ表示 │                             │
│  └──────────┘                             │
│                                            │
│  ─────────────────────────────────────     │
│                                            │
│             [ 現在の単語 ]                  │
│            【 ひらがなで入力 】             │
│                                            │
│  ─────────────────────────────────────     │
│                                            │
│  [プレイヤーHP]  コンボ: 45    時間: 75秒  │
│  ██████░░ 85/100                          │
│                                            │
├────────────────────────────────────────────┤
│  キーボード表示 (romajiGuide: partial)    │
└────────────────────────────────────────────┘
```

### 表示要素

**敵キャラクター:**
- 各チャプターのボス敵の立ち絵表示
- ダメージ時の反応アニメーション
- 特殊状態表示（強化、怯む、など）

**敵ステータス:**
- HP バー（敵が強いほど長い）
- 特殊状態表示
- 攻撃パターン予告（チャプター3以上）

**プレイヤー情報:**
- HP バー（現在の設定同様）
- コンボ表示
- 時間制限（がある場合）
- スタミナゲージ（ある場合）

---

## 🎨 ボス敵ビジュアル

### 敵キャラクター表示

```typescript
interface BossCharacter {
  id: string;                    // "boss_chapter1" など
  name: string;                  // "ハンゼ" など
  japaneseTitle: string;         // "修行者" など
  description: string;           // 敵の説明
  imageUrl: string;              // キャラ立ち絵
  weakPoints: string[];          // 弱点パターン
  attackPatterns: AttackPattern[];
  dialogueLines: string[];       // 戦闘中のセリフ
}

interface AttackPattern {
  name: string;
  timing: number;                // ms後に発動
  damage: number;
  effect: 'normal' | 'critical' | 'multi';
  warning: boolean;              // 予告表示するか
}
```

### UI エフェクト

```
敵の攻撃時:
├─ 画面全体赤フラッシュ
├─ 敵が前進するアニメーション
├─ ダメージ数字表示（プレイヤーHP位置）
└─ 敵セリフ表示

プレイヤーが正解:
├─ 敵にダメージ表示
├─ 敵がノックバック
├─ ボスHP削減アニメーション
└─ プレイヤーが攻撃モーション

クリティカル（難易度3単語）:
├─ ゴールド画面フラッシュ
├─ ボスHP大ダメージ表示
├─ 敵が大きくノックバック
└─ 勝利に近づく演出
```

---

## 🔄 ボスバトルフロー

### ターンシステム

```
1. プレイヤーターン
   ├─ 単語表示（2秒表示）
   ├─ 入力受付（時間内）
   └─ 正解判定 → ボスにダメージ

2. 敵ターン（一定ターンごと）
   ├─ 敵攻撃予告表示（時間あり）
   ├─ プレイヤーにダメージ
   └─ ボス特殊効果発動

3. 状態確認
   ├─ ボスHP ≤ 0? → 勝利
   ├─ プレイヤーHP ≤ 0? → 敗北
   └─ 時間切れ? → 敗北
```

### 敵の攻撃タイミング

```
パターンA（通常）:
毎10問正解ごとに敵が攻撃

パターンB（時間経過）:
30秒ごとに敵が攻撃、攻撃力増加

パターンC（条件トリガー）:
敵ターン達成時に即座に攻撃

パターンD（ランダム）:
低確率で予期しない攻撃
```

---

## 📈 ボス難易度スケーリング

### プレイヤーの進行に応じた調整

```
初回クリア後:
└─ チャレンジモードアンロック
   ├─ ハード: 敵HP 1.5倍
   ├─ マニアック: 敵HP 2倍 + 制限強化
   └─ インポッシブル: 敵HP 3倍 + ノーミス必須
```

### リトライシステム

```
ボス敗北時:
├─ リザルト画面で敗北を表示
├─ 「リトライ」または「ステージセレクト」選択
├─ リトライ時は敵状態リセット
└─ 敗北のたびに最後のスコア記録
```

---

## 🛠️ 実装ファイル構成

### 新規作成ファイル

```
src/
├─ types/
│  └─ boss.ts                    (ボス関連型定義)
├─ constants/
│  └─ bossConfigs.ts             (ボス設定定数)
├─ data/
│  ├─ bosses/
│  │  ├─ chapter1Boss.ts
│  │  ├─ chapter2Boss.ts
│  │  └─ ... (全7章)
│  └─ bossRewards.ts             (報酬定義)
├─ stores/
│  └─ bossStore.ts               (ボス状態管理)
├─ components/
│  ├─ boss/
│  │  ├─ BossCharacter.tsx       (敵表示)
│  │  ├─ BossHPBar.tsx           (敵HP表示)
│  │  ├─ BossEffects.tsx         (エフェクト)
│  │  └─ BossDialog.tsx          (敵セリフ)
│  └─ screens/
│     └─ BossScreen.tsx          (ボス戦画面)
└─ utils/
   └─ bossCalculations.ts        (ダメージ計算など)
```

### 修正対象ファイル

```
src/
├─ types/game.ts                 (StageConfig拡張)
├─ stores/gameStore.ts           (ボス状態追加)
├─ stores/progressStore.ts       (ボス記録追加)
├─ components/screens/
│  ├─ TypingScreen/index.tsx     (ボス戦判定)
│  └─ ResultScreen/index.tsx     (ボス結果表示)
├─ constants/gameJuice.ts        (ボス効果配置)
└─ data/words/
   └─ resultConstants.ts         (ボスランク判定)
```

---

## 📋 実装ロードマップ

### フェーズ1: 基盤構築（Week 1）
- [ ] ボス型定義作成
- [ ] ボス設定定数化
- [ ] ボス状態管理（ストア）
- [ ] ダメージ計算ロジック

### フェーズ2: UI実装（Week 2）
- [ ] ボスキャラクター表示
- [ ] 敵HP バー
- [ ] エフェクトシステム
- [ ] 敵セリフシステム

### フェーズ3: ゲームロジック（Week 3）
- [ ] ボスバトルスクリーン
- [ ] 敵攻撃システム
- [ ] 勝敗判定ロジック
- [ ] ボス報酬システム

### フェーズ4: テスト・ポーランド（Week 4）
- [ ] 全ボスのテストプレイ
- [ ] バランス調整
- [ ] ビジュアル改善
- [ ] ドキュメント作成

---

## 🎯 成功指標

| 指標 | 目標 | 評価基準 |
|------|------|---------|
| **コンテンツ提供** | 7つのボス実装 | 全チャプターで実装完了 |
| **プレイ体験** | 15分/ボス平均 | ボス戦の平均プレイ時間 |
| **難易度バランス** | 達成率30-40% | ボスクリア率 |
| **ユーザー満足度** | 高い達成感 | プレイテストフィードバック |
| **パフォーマンス** | 60 FPS維持 | フレームレート安定性 |

---

## ✅ チェックリスト

### 仕様確認
- [ ] ボスの難易度設定に同意
- [ ] HP計算式の妥当性確認
- [ ] 報酬システムの適切性確認
- [ ] ボス敵キャラの選定確認

### デザイン確認
- [ ] UI レイアウト承認
- [ ] エフェクト演出承認
- [ ] ボス敵立ち絵デザイン確認
- [ ] 色彩スキーム確認

### 技術確認
- [ ] 実装可能性確認
- [ ] パフォーマンス影響評価
- [ ] 既存機能との互換性確認
- [ ] テスト計画作成

---

## 📞 次のステップ

1. **このドキュメントのレビュー・承認**
2. **ボス敵キャラクターの立ち絵資料収集**
3. **詳細な実装計画作成**
4. **フェーズ1の開発開始**

---

**本ドキュメントは企画・検討段階です。**
**実装前に全項目の確認と承認を推奨します。**

